var exitIntents,isIE,isIE11,isMobile;isIE=document.all&&!window.atob,isIE11=window.navigator.msPointerEnabled,isMobile=document.documentElement.className.indexOf("mobile")!==-1,exitIntents=[],window.disableExitIntents=function(){return exitIntents.forEach(function(t){return t.disable()})},function(t){return this.ExitIntent=function(i){var n,e,s;return this.el=i.el,e=i.name,this.sendAnalytics=i.sendAnalytics,this.analyticsClient=null!=(s=i.analyticsClient)?s:"/ajax",this.name=e||"popup_"+Math.floor(1e5*Math.random()),this.ID=this.el.data("id"),this.popup=new Popup(this.el,this.name),this.disabled=!1,this.opened=!1,this.open=function(){return this.popup.open(),this.opened=!0,this.disable()},this.close=function(){return this.popup.close(),this.opened=!1,this},this.enable=function(){return this.disabled=!1,this},this.disable=function(){return this.disabled=!0,this},this.emit=function(t){return this.el.trigger(t),this.popup.el.trigger(t),this},this.replaceWith=function(t){return this.popup.el.children(".popup-content").html(t),this.attachMiscEvents},this.attachOpeningEvents=function(){return isMobile||$$(window).on("mouseleave."+this.name,function(t){return function(i){if(!(t.disabled||Popup.prototype.isOpen||i.clientY>=1))return t.open()}}(this)),isIE||isIE11||isMobile||this.disabled||this.opened||(window.history.replaceState({id:"exit-init"},"",""),window.history.pushState({id:"exit-control"},"",""),$$(window).on("popstate",function(t){return function(i){if(!t.disabled&&"state"in window.history&&null!==window.history.state&&"exit-control"!==window.history.state.id)return t.open()}}(this))),this},this.attachMiscEvents=function(){if(t(".popup-overlay").on("click."+this.name,function(i){return function(n){var e,s;if(e=t(n.currentTarget),s=e.hasClass("belongs_to_exit-intent"))return i.popup.el.trigger("closed")}}(this)),this.el.find(".no").on("click."+this.name,function(t){return function(){t.close();try{return localStorage.setItem("exit_intent-complete","true")}catch(t){}}}(this)),this.el.find(".submit").on("click."+this.name,function(t){return function(){return t.emit("submitted"),t.popup.el.trigger("submitted")}}(this)),this.el.find(".step").first().find(".next").on("click."+this.name,function(t){return function(){return t.emit("continued"),t.popup.el.trigger("continued")}}(this)),this.sendAnalytics)return this.popup.el.on("opened",function(t){return function(){return t.sendData("opened")}}(this)),this.popup.el.on("closed",function(t){return function(){return t.sendData("clicked_no")}}(this)),this.popup.el.on("continued",function(t){return function(){return t.sendData("clicked_yes")}}(this)),this.popup.el.on("submitted",function(t){return function(){return t.sendData("submitted")}}(this))},this.detachAllEvents=function(){return t(".popup-overlay").off("click."+this.name),this.el.find(".no").off("click."+this.name),this.el.find(".submit").off("click."+this.name),this.el.find(".step").first().find(".next").off("click."+this.name),$$(window).off("mouseleave."+this.name)},n={action:"update_campaign_stat",type:"exit_intent",itemID:this.ID},this.sendData=function(i){return n.user_action=i,t.post(this.analyticsClient,n),this},this.attachOpeningEvents(),this.attachMiscEvents(),this}}(jQuery);